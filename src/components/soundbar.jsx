import {useState, useEffect } from 'react';
import {Howl, Howler} from 'howler';
import RainSound from '../assets/rain.mp3';
import ThunderSound from '../assets/thunder.mp3';
import FireSound from '../assets/fire.mp3';


function SoundBar() {
    //decides what will play or pause on render change
    useEffect(() => {
        for (const key in sound){
            if(key !== 'none') {
            if(sound[key].active){
                // sound[key].track.load();
                // sound[key].track.once('load', () => {
                //     console.log('Sound has been loaded successfully!');
                //     sound[key].track.play();
                //   });

                sound[key].track.stereo(sound[key].pan); //pans it
                sound[key].track.play();
                
                
            } else {
                sound[key].track.pause();
            }
        }
        }
      });

    var [currentSound, setCurrentSound] = useState("none");

    var [sound, setSound] = useState({
        none: {track:{volume: 0.5}, pan: 1},
        rain: {
            active: false,
            track: new Howl({ src: RainSound,  preload: true, volume: 1 }),
            pan: 0
        },
        thunder: { 
            active: false,
            track: new Howl({ src: ThunderSound,  preload: true, volume: 0.02 }),
            pan: -1
        },
        fire: { 
            active: false,
            track: new Howl({ src: FireSound,  preload: true, volume: 1 }),
            pan: 0
        }
        // coffee: false,
        // car: false,
        // city: false,
        // forest: false,
        // wind: false,
        // waves: false
    })

    var onClickIcon = (icon) =>{
        console.log(icon);
        setSound({...sound, [icon]: {...sound[icon], active: !sound[icon].active}});
    }

    var onHoverAction = (icon) =>{
        console.log(icon)
       setCurrentSound(icon);
    }

    var onVolumeChange = (val) => {
        setSound({...sound, [currentSound]:{...sound[currentSound], track: {...sound[currentSound].track, volume: val }}});
    }

    return (
        <div className="soundBarContainer">
        <div className="soundControl">
            <input type="range" value={sound[currentSound].track.volume} onChange={() => onVolumeChange()}name="volume" min="0" max="1" step="0.01" />
            <input type="range" name="pan" min="-1" max="1" step="0.01" />
        </div>
        <div className="soundBar">
            {rainIcon(sound.rain.active, onClickIcon, onHoverAction)}
            {thunderstormIcon(sound.thunder.active, onClickIcon, onHoverAction)}
            {fireIcon(sound.fire.active, onClickIcon, onHoverAction)}
            {/* {coffeeIcon(sound.coffee,sound, setSound)}
            {carIcon(sound.car,sound, setSound)}
            {cityIcon(sound.city,sound, setSound)}
            {forestIcon(sound.forest,sound, setSound)}
            {windIcon(sound.wind,sound, setSound)}
            {wavesIcon(sound.waves,sound, setSound)} */}
        </div>
        </div>
    )
}

export default SoundBar;


//icons

function rainIcon(cName, onClickIcon, onHoverAction) {

    return (
        <svg  onMouseLeave={() => onHoverAction('none') } onMouseEnter={() => onHoverAction('rain') } onClick={() => onClickIcon('rain')} className={cName+''} width="36" height="36" viewBox="0 0 36 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M30.633 11.274C30.366 6.4245 26.0865 2.607 20.985 3.036C19.3545 1.1775 16.9455 0 14.25 0C9.492 0 5.619 3.6645 5.367 8.274C2.3175 8.8125 0 11.4315 0 14.583C0 18.126 2.9235 21 6.531 21H8.52C9.6765 22.797 11.706 24 14.031 24H29.4675C33.0765 24 36 21.126 36 17.583C36 14.4315 33.6825 11.8125 30.633 11.274ZM7.5405 18H6.531C4.5855 18 3 16.467 3 14.583C3 11.406 6.156 10.6875 8.232 10.815C8.157 8.781 8.4375 3 14.25 3C15.7005 3 16.821 3.375 17.685 3.966C14.9505 5.349 13.041 8.085 12.867 11.274C9.834 11.811 7.3215 14.4645 7.5405 18ZM29.4675 21H14.031C12.0855 21 10.5 19.467 10.5 17.583C10.5 14.406 13.656 13.6875 15.732 13.815C15.657 11.781 15.9375 6 21.75 6C27.4065 6 28.0935 11.6565 27.768 13.8135C30.0315 13.656 33 14.469 33 17.583C33 19.467 31.4145 21 29.4675 21ZM10.3035 31.0695L8.1885 28.9545L11.643 25.5L13.758 27.615L10.3035 31.0695ZM5.3535 36L3.2385 33.9045L6.693 30.45L8.808 32.565L5.3535 36ZM17.733 31.0695L15.618 28.9545L19.0725 25.5L21.1875 27.615L17.733 31.0695ZM12.783 36L10.668 33.9045L14.1225 30.45L16.2375 32.565L12.783 36ZM25.0455 31.0695L22.9305 28.9545L26.385 25.5L28.5 27.615L25.0455 31.0695ZM20.094 36L17.979 33.9045L21.4335 30.45L23.5485 32.565L20.094 36Z"/>
        </svg>
    )
}


function thunderstormIcon(cName, onClickIcon, onHoverAction) {
    return (
        <svg onMouseLeave={() => onHoverAction('none') } onMouseEnter={() => onHoverAction('thunder')} onClick={() => onClickIcon('thunder')} className={cName+''} width="37" height="36" viewBox="0 0 37 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M21.203 19.5H25.766L23 25.5H27.5L18.5 36L21.5 28.5H17L21.203 19.5ZM31.133 11.274C30.866 6.426 26.5865 2.6085 21.485 3.0375C19.8545 1.1775 17.4455 0 14.75 0C9.992 0 6.119 3.6645 5.867 8.274C2.8175 8.8125 0.5 11.4315 0.5 14.583C0.5 18.126 3.4235 21 7.031 21H9.02C10.1765 22.797 12.206 24 14.531 24H16.6025L18.005 21H14.531C12.5855 21 11 19.4685 11 17.583C11 14.406 14.156 13.6875 16.232 13.8135C16.157 11.781 16.4375 6 22.25 6C27.9065 6 28.5935 11.6565 28.268 13.8135C30.5315 13.656 33.5 14.469 33.5 17.583C33.5 19.4685 31.9145 21 29.9675 21H27.5705L26.1875 24H29.9675C33.5765 24 36.5 21.126 36.5 17.583C36.5 14.4315 34.1825 11.8125 31.133 11.274ZM13.367 11.274C10.334 11.8095 7.8215 14.4645 8.0405 18H7.031C5.0855 18 3.5 16.4685 3.5 14.583C3.5 11.406 6.656 10.6875 8.732 10.8135C8.657 8.781 8.9375 3 14.75 3C16.2005 3 17.321 3.375 18.185 3.9675C15.4505 5.349 13.541 8.085 13.367 11.274Z" />
        </svg>
    )
}

function fireIcon(cName, onClickIcon, onHoverAction) {
   
    return (
        <svg onMouseLeave={() => onHoverAction('none') } onMouseEnter={() => onHoverAction('fire')} onClick={() => onClickIcon('fire')} className={cName+''} width="24" height="36" viewBox="0 0 24 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M22.5 36H1.5V33H22.5V36ZM9.5625 6.4305C11.619 9.9375 11.6715 16.4055 10.0785 19.101C13.9215 18.633 17.751 14.844 18.5895 12.3015C20.154 14.46 21 17.0175 21 19.7505C21 22.0815 19.707 25.692 16.1715 27.4935C15.843 25.407 14.484 23.1345 12.2145 21.8445C10.0545 23.1105 8.469 25.8765 8.0385 27.7515C6.1875 26.9295 3 24.4215 3 21C3 16.0785 7.0635 14.1225 9.5625 6.4305ZM7.5 0C8.313 9.438 0 12.687 0 21C0 26.646 5.235 30.63 10.5 31.5075C10.242 29.3205 10.9455 27.2115 12.249 25.9695C13.524 27.1185 14.109 29.673 13.5 31.5015C19.302 30.3765 24 25.7145 24 19.752C24 14.313 21.2505 9.1875 16.0635 6C16.9695 9.468 15.798 11.859 14.157 13.344C14.2515 8.961 12.4215 3.093 7.5 0Z" />
        </svg>
    )
}

function coffeeIcon(cName, sound, setSound) {
    return (
        <svg onClick={() => setSound({...sound, coffee: !sound.coffee})} className={cName+''} width="30" height="36" viewBox="0 0 30 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M19.3665 15C18.9045 19.9875 17.2695 23.568 14.943 27H7.5555C5.496 23.9865 3.6375 20.442 3.1335 15H19.3665ZM22.5 12H0C0 20.574 2.739 25.494 6 30H16.5C19.68 25.6335 22.5 20.5005 22.5 12ZM24.1785 15C24.093 16.0515 23.967 17.0505 23.8005 18H26.1255C25.452 19.935 23.8755 21.717 22.677 22.371C22.14 23.928 21.4965 25.3425 20.787 26.649C25.698 24.9345 29.556 19.8855 30 15H24.1785ZM12.561 10.4985C19.6665 4.0935 11.091 4.4325 12.7365 0C7.062 5.7255 14.85 5.853 12.561 10.4985ZM8.391 10.5C13.122 6.2625 7.395 5.847 8.5215 2.8515C4.5585 7.032 9.9465 7.14 8.391 10.5ZM22.5 33H0V36H22.5V33Z"/>
        </svg>        
    )
}

function carIcon(cName, sound, setSound) {
    return (
        <svg onClick={() => setSound({...sound, car: !sound.car})} className={cName+''} width="37" height="22" viewBox="0 0 37 22" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M17 9.5V5H18.8705C20.1935 5 20.723 5.4455 21.6125 6.3635C22.2905 7.061 24.5 9.5 24.5 9.5H17ZM15.5 5H12.1355C11.1035 5 10.559 5.333 10.07 5.8715C9.596 6.3935 8.7275 7.2935 7.811 8.378C10.3895 9.344 13.8935 9.5 15.5 9.5V5ZM36.5 12.7415C36.5 8.507 33.455 7.6265 32.309 7.295C30.596 6.7985 29.828 6.5825 27.7625 6.104C26.9375 5.2865 24.6845 3.05 24.179 2.54L24.0455 2.4035C23.0465 1.385 21.914 0.5 19.2875 0.5H7.8275C7.007 0.5 6.641 1.184 7.4465 1.916C6.6455 2.609 4.5305 4.475 3.9365 5.078C1.8605 7.181 0.5 8.798 0.5 11.9825C0.5 15.674 2.5415 18.3695 5.2685 18.4805C5.8835 20.234 7.5365 21.5 9.5 21.5C11.456 21.5 13.1045 20.243 13.724 18.5H23.2745C23.894 20.243 25.5425 21.5 27.4985 21.5C29.4605 21.5 31.112 20.2355 31.7285 18.485C34.6295 18.401 36.5 16.2275 36.5 12.7415ZM9.5 18.8C8.507 18.8 7.7 17.993 7.7 17C7.7 16.007 8.507 15.2 9.5 15.2C10.493 15.2 11.3 16.007 11.3 17C11.3 17.993 10.493 18.8 9.5 18.8ZM27.5 18.8C26.507 18.8 25.7 17.993 25.7 17C25.7 16.007 26.507 15.2 27.5 15.2C28.493 15.2 29.3 16.007 29.3 17C29.3 17.993 28.493 18.8 27.5 18.8ZM31.748 15.575C31.1495 13.793 29.4845 12.5 27.5 12.5C25.5095 12.5 23.84 13.802 23.246 15.593H13.754C13.16 13.802 11.4905 12.5 9.5 12.5C7.5215 12.5 5.861 13.7855 5.2565 15.56C4.3775 15.389 3.5 14.0045 3.5 11.9825C3.5 9.98 4.205 9.0755 6.071 7.184C7.1585 6.0815 8.036 5.3705 9.4655 4.145C9.9755 3.7085 10.6265 3.497 11.2985 3.5H19.058C20.888 3.5 21.4235 4.0775 22.232 4.838C22.8605 5.4275 26.255 8.8355 26.255 8.8355C26.255 8.8355 29.7095 9.6665 31.475 10.178C32.735 10.5425 33.5 10.8965 33.5 12.743C33.5 14.537 32.906 15.482 31.748 15.575Z" />
        </svg>      
    )
}

function cityIcon(cName, sound, setSound) {
    return (
        <svg onClick={() => setSound({...sound, city: !sound.city})} className={cName+''} width="35" height="36" viewBox="0 0 35 36" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path  d="M7.5 10.5V0H27V15H34.5V36H0V10.5H7.5ZM7.5 34.5V28.5H6V34.5H7.5ZM19.5 28.5H15V34.5H19.5V28.5ZM28.5 28.5H27V34.5H28.5V28.5ZM31.5 18H27V27H30V33H31.5V18ZM24 3H10.5V33H12V25.5H22.5V33H24V3ZM4.5 33V27H7.5V13.5H3V33H4.5ZM30 24H28.5V21H30V24ZM4.5 21H6V24H4.5V21ZM16.5 22.5H13.5V19.5H16.5V22.5ZM21 22.5H18V19.5H21V22.5ZM6 16.5V19.5H4.5V16.5H6ZM16.5 18H13.5V15H16.5V18ZM21 18H18V15H21V18ZM16.5 13.5H13.5V10.5H16.5V13.5ZM21 13.5H18V10.5H21V13.5ZM16.5 9H13.5V6H16.5V9ZM21 9H18V6H21V9Z"/>
        </svg>
    )
}

function forestIcon(cName, sound, setSound) {
    return (
        <svg onClick={() => setSound({...sound, forest: !sound.forest})} className={cName+''} width="30" height="41" viewBox="0 0 30 41" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M18.5015 39H11.5015V31.5H3L9 22.5H4.5L10.5 13.5H7.5L15.0015 3L22.5 13.5H19.5L25.5 22.5H21L27 31.5H18.5015V39Z" />
        </svg>
    )
}

function windIcon(cName, sound, setSound) {
    return (
        <svg onClick={() => setSound({...sound, wind: !sound.wind})} className={cName+''} width="37" height="34" viewBox="0 0 37 34" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M27.5 29C27.5 26.516 25.484 24.5 23 24.5H0.5V27.5H23C23.828 27.5 24.5 28.172 24.5 29C24.5 29.828 23.828 30.5 23 30.5C22.3955 30.5 21.8795 30.137 21.6425 29.6195L19.019 31.0535C19.7675 32.501 21.26 33.5 23 33.5C25.484 33.5 27.5 31.484 27.5 29ZM29.021 17.5175C29.144 16.388 30.089 15.5 31.25 15.5C32.4905 15.5 33.5 16.5095 33.5 17.75C33.5 18.9905 32.4905 20 31.25 20H0.5V23H31.25C34.148 23 36.5 20.648 36.5 17.75C36.5 14.852 34.148 12.5 31.25 12.5C28.814 12.5 26.7845 14.174 26.192 16.4255L29.021 17.5175ZM12.5 3.5C17.3195 3.5 17.5505 8.4395 17.2775 9.9215C18.743 9.8675 21.5 10.2515 21.5 12.9995C21.5 14.5055 20.1965 15.5 18.719 15.5H6.251C4.7735 15.5 3.5 14.5055 3.5 12.9995C3.5 10.2725 6.1685 9.8255 7.7225 9.9215C7.6025 8.57 7.5215 3.5 12.5 3.5ZM12.5 0.5C8.4935 0.5 5.2325 3.6395 5.021 7.5935C2.4515 8.054 0.5 10.298 0.5 12.9995C0.5 16.0355 2.963 18.5 6.0005 18.5H18.9995C22.037 18.5 24.5 16.0355 24.5 12.9995C24.5 10.298 22.5485 8.054 19.979 7.5935C19.7675 3.6395 16.5065 0.5 12.5 0.5Z" />
        </svg>
    )
}

function wavesIcon(cName, sound, setSound) {
    return (
        <svg onClick={() => setSound({...sound, waves: !sound.waves})} className={cName+''} width="36" height="24" viewBox="0 0 36 24" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M5.99953 16.3448C5.55226 16.3448 4.834 16.917 3.8867 19.269C2.83425 21.8821 1.55285 23.7924 0.000536954 23.7931L0 20.069C0.447265 20.0688 1.16545 19.4963 2.11258 17.1448C3.16521 14.5313 4.44687 12.6207 5.99953 12.6207C7.55219 12.6207 8.83385 14.5313 9.88648 17.1448C10.8338 19.4968 11.552 20.069 11.9993 20.069C12.4466 20.069 13.1648 19.4968 14.1121 17.1448C15.1648 14.5313 16.4464 12.6207 17.9991 12.6207C19.5517 12.6207 20.8334 14.5313 21.886 17.1448C22.8333 19.4968 23.5516 20.069 23.9989 20.069C24.4461 20.069 25.1644 19.4968 26.1117 17.1448C27.1643 14.5313 28.446 12.6207 29.9986 12.6207C31.5513 12.6207 32.833 14.5313 33.8856 17.1448C34.8332 19.4976 35.5516 20.0693 35.9989 20.069L36 23.7931C34.4467 23.7944 33.1644 21.8834 32.1115 19.269C31.1642 16.917 30.4459 16.3448 29.9986 16.3448C29.5514 16.3448 28.8331 16.917 27.8858 19.269C26.8332 21.8825 25.5515 23.7931 23.9989 23.7931C22.4462 23.7931 21.1645 21.8825 20.1119 19.269C19.1646 16.917 18.4464 16.3448 17.9991 16.3448C17.5518 16.3448 16.8336 16.917 15.8863 19.269C14.8336 21.8825 13.552 23.7931 11.9993 23.7931C10.4467 23.7931 9.16499 21.8825 8.11236 19.269C7.16506 16.917 6.4468 16.3448 5.99953 16.3448Z" />
        <path d="M5.99953 3.93103C5.55226 3.93103 4.834 4.50322 3.8867 6.85521C2.83425 9.4683 1.55285 11.3786 0.000536954 11.3793L0 7.65517C0.447265 7.65498 1.16545 7.08256 2.11258 4.73099C3.16521 2.11747 4.44687 0.206894 5.99953 0.206894C7.55219 0.206894 8.83385 2.11747 9.88648 4.73099C10.8338 7.08298 11.552 7.65517 11.9993 7.65517C12.4466 7.65517 13.1648 7.08298 14.1121 4.73099C15.1648 2.11747 16.4464 0.206894 17.9991 0.206894C19.5517 0.206894 20.8334 2.11747 21.886 4.73099C22.8333 7.08298 23.5516 7.65517 23.9989 7.65517C24.4461 7.65517 25.1644 7.08298 26.1117 4.73099C27.1643 2.11747 28.446 0.206894 29.9986 0.206894C31.5513 0.206894 32.833 2.11747 33.8856 4.73099C34.8332 7.08384 35.5516 7.65555 35.9989 7.65517L36 11.3793C34.4467 11.3806 33.1644 9.46959 32.1115 6.85521C31.1642 4.50322 30.4459 3.93103 29.9986 3.93103C29.5514 3.93103 28.8331 4.50322 27.8858 6.85521C26.8332 9.46873 25.5515 11.3793 23.9989 11.3793C22.4462 11.3793 21.1645 9.46873 20.1119 6.85521C19.1646 4.50322 18.4464 3.93103 17.9991 3.93103C17.5518 3.93103 16.8336 4.50322 15.8863 6.85521C14.8336 9.46873 13.552 11.3793 11.9993 11.3793C10.4467 11.3793 9.16499 9.46873 8.11236 6.85521C7.16506 4.50322 6.4468 3.93103 5.99953 3.93103Z" />
        </svg>
    )
}